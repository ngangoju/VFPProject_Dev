<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">
<h:body>
	<ui:composition template="/template/common/commonLayout.xhtml">

		<ui:define name="content">
			<div class="panel panel-info">
				<!-- Default panel contents -->
				<div class="panel-heading">
					<ui:repeat var="time" value="#">

						<p:outputPanel rendered="#{activityController.rendered}"
							autoUpdate="true">
							<span style="color: white; font-size: 10pt"> <label
								style="font-family: Open Sans sans-serif !important; font-size: 18px !important; margin-left: 25%;">Activity
									Management</label>
							</span>
						</p:outputPanel>
						<p:outputPanel rendered="#{activityController.renderTaskForm}"
							autoUpdate="true">

							<a
								href="#{loadUserInformationsController.getContextPath()}/menu/Activity.xhtml"
								class="btn btn-primary glyphicon glyphicon-chevron-left"
								style="font-size: 14px !important;">
								#{msg['UserCatForm.BackBoardButtom']} </a>
							<span style="color: white; font-size: 10pt">#{msg['header.title.fieldmarked']}
								<span style="color: red">#{msg['header.title.asteriks']}</span>
								#{msg['header.title.mandatory']}
							</span>
						</p:outputPanel>
					</ui:repeat>
				</div>
				<div class="panel-body"
					style="border: 0px solid blue; margin-top: 4px; height: auto; font-family: Open Sans sans-serif !important; font-size: 15px !important;">



					<h:form>
						<h:panelGroup layout="block"
							rendered="#{not activityController.valid and not facesContext.validationFailed}">
							<ul>
								<ui:repeat value="#{facesContext.messageList}"
									var="facesMessage">
									<li class="alert alert-danger"
										style="list-style: none; background-color: #FF2400; color: white">
										<center>
											<h:outputText value="#{facesMessage.summary}" escape="false" />
										</center>
									</li>
								</ui:repeat>
							</ul>
						</h:panelGroup>

						<h:panelGroup layout="block"
							rendered="#{activityController.valid and  not facesContext.validationFailed}">
							<ul>
								<ui:repeat value="#{facesContext.messageList}"
									var="facesMessage">
									<li
										style="list-style: none; background-color: #32CD32; color: white; margin-left: -4.9%"
										class="alert alert-success"><h:outputText
											value="#{facesMessage.summary}" escape="false" /></li>
								</ui:repeat>
							</ul>
						</h:panelGroup>


						<!--  LIST OF TASK ASSIGNED START HERE -->
						<p:outputPanel rendered="#{activityController.renderTaskForm}"
							autoUpdate="true">
							<fieldset style="width: 90%; margin-left: 3%;">
								<legend>
									<label
										style="font-family: Open Sans sans-serif !important; font-size: 15px !important;">#{msg['form.activity.title']}</label>
								</legend>
								<!-- Task assigned details -->
								<h:panelGroup id="surnamePanl" layout="block">
									<div class="form-group row">
										<label for="todate"
											class="col-md-4 col-sm-4 col-xs-4 control-label"
											style="color: black">#{msg['form.task.name']}<span
											style="color: red">*</span></label>
										<div class="col-md-6 col-sm-6 col-xs-7">
											<h:inputText id="tasknameId" binding="#{surnameId}"
												disabled="true" styleClass="form-control"
												value="#{activityController.taskAssign.task.taskName}"
												maxlength="80" required="true"
												validatorMessage="#{msg['error.enter.invalid.surname']}"
												converterMessage="#{msg['error.enter.invalid.surname']}"
												requiredMessage="#{msg['tname.required.message']}">
												<f:validateRegex
													pattern="#{regex['regex.string.Validation']}" />
												<f:validateLength maximum="35" />
											</h:inputText>
										</div>
										<h:message for="tasknameId" styleClass="help-block"></h:message>
									</div>
								</h:panelGroup>

								<h:panelGroup id="ReasonPanel" layout="block">
									<div class="form-group row">
										<label for="todate"
											class="col-md-4 col-sm-4 col-xs-4 control-label"
											style="color: black">#{msg['form.task.description']}<span
											style="color: red">*</span>
										</label>
										<div class="col-md-6 col-sm-6 col-xs-7">
											<h:inputTextarea id="descriptionId" styleClass="form-control"
												disabled="true"
												value="#{activityController.taskAssign.task.description}"
												maxlength="150" required="true"
												requiredMessage="#{msg['description.required.message']}"
												validatorMessage="#{msg['error.address.maxlength']}">
												<f:validateLength maximum="150" />
											</h:inputTextarea>
										</div>
										<div class="col-md-1 col-sm-1 col-xs-1"></div>

										<h:message for="descriptionId" styleClass="help-block"></h:message>
									</div>
								</h:panelGroup>
								<!-- End of task details -->

								<h:panelGroup id="taskdescPanel" layout="block">


									<div class="form-group row">
										<label for="todate"
											class="col-md-4 col-sm-4 col-xs-4 control-label"
											style="color: black">#{msg['form.activity.description']}<span
											style="color: red">*</span>
										</label>
										<div class="col-md-6 col-sm-6 col-xs-7">
											<h:inputTextarea id="descrId" styleClass="form-control"
												value="#{activityController.activity.description}"
												maxlength="150" required="true"
												requiredMessage="#{msg['description.required.message']}"
												validatorMessage="#{msg['error.address.maxlength']}">
												<f:validateLength maximum="150" />
											</h:inputTextarea>
										</div>
										<div class="col-md-1 col-sm-1 col-xs-1"></div>
										<h:message for="descrId" styleClass="help-block"></h:message>
									</div>
								</h:panelGroup>
								<h:panelGroup id="typePane" layout="block">
									<div class="form-group row">
										<label for="todate"
											class="col-md-4 col-sm-4 col-xs-4 control-label"
											style="color: black">#{msg['form.activity.type']}<span
											style="color: red">*</span></label>
										<div class="col-md-6 col-sm-6 col-xs-7" style="">
											<h:selectOneMenu id="typeId" styleClass="form-control"
												required="true"
												value="#{activityController.activity.type}"
												requiredMessage="#{msg['type.required.message']}">
												<f:selectItem
													itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
													itemValue="#{null}" escapeItem="true" />
												<f:selectItems value="#{activityController.type}"
													var="option" itemValue="#{option}" itemLabelEscaped="true" />
												
											</h:selectOneMenu>
										</div>
										<div class="col-md-2">
													<span class="tooltips-input-main"><a
														class="tooltips-input"> <h:panelGroup
																id="tooltips-contactDetails" layout="block">
																<img
																	src="#{loadUserInformationsController.getContextPath()}/resources/image/question.jpg"
																	style="width: 18%" alt="question" />
															</h:panelGroup> <p:tooltip id="toolTipContent"
																for="tooltips-contactDetails" position="bottom">
																<span> #{msg['help.activitytype.message']} </span>
															</p:tooltip>
													</a></span>
														<div class="col-md-1 col-sm-1 col-xs-1"></div>
										<h:message for="typeId" styleClass="help-block"></h:message>
												</div>
											
									</div>
								</h:panelGroup>
								<h:panelGroup id="categoryPane" layout="block">
									<div class="form-group row">
										<label for="todate"
											class="col-md-4 col-sm-4 col-xs-4 control-label"
											style="color: black">#{msg['form.activity.weight']}<span
											style="color: red">*</span></label>
										<div class="col-md-6 col-sm-6 col-xs-7" style="">
											<h:selectOneMenu id="weightId" styleClass="form-control"
												required="true"
												value="#{activityController.activity.weight}"
												requiredMessage="#{msg['weight.required.message']}">
												<f:selectItem
													itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
													itemValue="#{null}" escapeItem="true" />
												<f:selectItems value="#{activityController.weight}"
													var="option" itemValue="#{option}" itemLabelEscaped="true" />

											</h:selectOneMenu>
										</div>
										<h:message for="weightId" styleClass="help-block"></h:message>
									</div>
								</h:panelGroup>


								<div class="form-group row">
									<label for="todate"
										class="col-md-4 col-sm-4 col-xs-4 control-label"
										style="color: black"></label>
									<div class="col-md-6 col-sm-6 col-xs-7">
										<h:commandButton class="btn btn-info btn-xlg btn-block"
											action="#{activityController.saveActivite}"
											value="#{msg['label.submit.message.save']}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandButton>

									</div>
									<span class="text-danger" id="err"></span>
								</div>
							</fieldset>
						</p:outputPanel>
						<!-- END OF ASSIGNMENT -->


						<!-- LIST OF ASSIGNED TASK  TABLE VIEW -->
						<p:outputPanel rendered="#{activityController.renderTask}"
							autoUpdate="true">
							<h:dataTable id="taskAssignTable" binding="#{table}"
								style="font-family: Open Sans sans-serif !important; font-size: 15px !important;box-sizing: border-box; width:80% !important;
       						 -webkit-box-shadow: none;
       							 box-shadow: none !important;
       								 margin: 17px 45px 0 !important;"
								value="#{activityController.taskAssignDetails}" var="info"
								class="table table-striped table-hover table-bordered tableUpdated ">
								<f:facet name="header">
									<label style="margin-left: 35%; font-size: 18px">#{msg['form.activity.table.title']}</label>

								</f:facet>

								<h:column>
									<f:facet name="header">
										<label>No</label>
									</f:facet>
									<br />
									<h:outputText value="#{table.rowIndex + 1}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Taskname</label>
									</f:facet>
									<br />
									<h:outputText value="#{info.task.taskName}">
									</h:outputText>

								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Description</label>
									</f:facet>
									<br />
									<h:outputText value="#{info.task.description}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Action</label>
									</f:facet>
									<div class="btn-group btn btn-sm" role="group"
										aria-label="Basic example"
										style="margin-top: 5%; margin-left: 10%">
										<h:commandLink data-toggle="tooltip" data-placement="left"
											title="#{msg['createactivity.editButton']}"
											class="btn btn-info glyphicon glyphicon-edit"
											action="#{activityController.createActivity(info)}">
										</h:commandLink>
										<h:commandLink data-toggle="tooltip" data-placement="left"
											title="#{msg['viewactivity.editButton']}"
											class="btn btn-primary glyphicon glyphicon-list"
											action="#{activityController.viewActivity(info)}">
										</h:commandLink>


									</div>
								</h:column>
							</h:dataTable>
						</p:outputPanel>
						<!-- END OF TASK VIEW -->

						<!-- LIST OF CREATED ACTIVITIES ON THE TASK  TABLE VIEW -->
						<p:outputPanel rendered="#{activityController.renderCompleted}"
							autoUpdate="true">
							<h:dataTable id="activityTable" binding="#{tabl}"
								style="font-family: Open Sans sans-serif !important; font-size: 15px !important;box-sizing: border-box; width:95% !important;
       						 -webkit-box-shadow: none;
       							 box-shadow: none !important;
       								 margin: 17px 25px 0 !important;"
								value="#{activityController.activityDtoDetails}" var="act"
								class="table table-striped table-hover table-bordered tableUpdated ">
								<f:facet name="header">
									<label
										style="margin-left: 30%; font-size: 16px; font-family: Open Sans sans-serif !important;">#{msg['form.Taskactivity.table.title']}:<p:outputLabel
											value="#{activityController.taskAssign.task.taskName}" /></label>
									<br />
									<label
										style="margin-left: 35%; font-size: 17px; font-family: Open Sans sans-serif !important">#{msg['form.listactivity.table.title']}</label>
								</f:facet>

								<h:column>
									<f:facet name="header">
										<label>No</label>
									</f:facet>
									<br />
									<h:outputText value="#{tabl.rowIndex + 1}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Description</label>
									</f:facet>
									<br />
									<h:inputTextarea id="descriptionId1" value="#{act.description}"
										styleClass="form-control" size="10" rendered="#{act.editable}"
										maxlength="250" required="true"
										requiredMessage="#{msg['description.required.message']}"
										validatorMessage="#{msg['error.address.maxlength']}">
										<f:validateLength maximum="150" />
									</h:inputTextarea>
									<h:message for="descriptionId1" styleClass="help-block"></h:message>

									<h:outputText value="#{act.description}"
										rendered="#{not act.editable}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Weight</label>
									</f:facet>
									<br />
									<h:selectOneMenu id="weightId1" styleClass="form-control"
										required="true" rendered="#{act.editable}"
										value="#{act.weight}"
										requiredMessage="#{msg['weight.required.message']}">
										<f:selectItem
											itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
											itemValue="#{null}" itemLabelEscaped="false" />
										<f:selectItems value="#{activityController.weight}"
											var="option" itemValue="#{option}" itemLabelEscaped="true" />
										<f:ajax event="change" execute="@this"
											listener="#{activityController.changeSelectBox('Junior')}"
											render="ReasonPanel" />
									</h:selectOneMenu>
									<h:message for="weightId1" styleClass="help-block"></h:message>

									<h:outputText value="#{act.weight}"
										rendered="#{not act.editable}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Type</label>
									</f:facet>
									<br />
									<h:selectOneMenu id="type1" styleClass="form-control"
										required="true" rendered="#{act.editable}"
										value="#{act.type}"
										requiredMessage="#{msg['weight.required.message']}">
										<f:selectItem
											itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
											itemValue="#{null}" itemLabelEscaped="false" />
										<f:selectItems value="#{activityController.type}"
											var="option" itemValue="#{option}" itemLabelEscaped="true" />
										<f:ajax event="change" execute="@this"
											listener="#{activityController.changeSelectBox('Junior')}"
											render="ReasonPanel" />
									</h:selectOneMenu>
									<h:message for="type1" styleClass="help-block"></h:message>

									<h:outputText value="#{act.type}"
										rendered="#{not act.editable}" />
								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Status</label>
									</f:facet>
									<br />
									<h:outputText value="#{act.status}" />
								</h:column>


								<h:column>
									<f:facet name="header">
										<label>Creationdate</label>
									</f:facet>
									<br />
									<h:outputText value="#{act.createdDate}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>

								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Duedate</label>
									</f:facet>
									<br />
									
									<h:outputText value="#{act.dueDate}" rendered="#{not act.editable}" >
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText>

								</h:column>
								<h:column>
									<f:facet name="header">
										<label>Action</label>
									</f:facet>
									<div class="btn-group btn btn-sm" role="group"
										aria-label="Basic example" style="margin-top: 5%;">
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.editButton']}"
											class="btn btn-sm btn-success 	glyphicon glyphicon-edit"
											action="#{activityController.editAction(act)}"
											rendered="#{not act.changeAction}"/>
											<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.editButton']}"
											class="btn btn-sm btn-success 	glyphicon glyphicon-edit"
											action="#{activityController.editChangeAction(act)}"
											rendered="#{not act.editAction}"/>
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.planButton']}"
											class="btn btn-sm btn-warning 	glyphicon glyphicon-check"
											action="#{activityController.planAction(act)}"
											rendered="#{ not act.planAction}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink>
										
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.commentButton']}"
											class="btn btn-sm btn-primary glyphicon glyphicon-info-sign"
											action="#{activityController.commentAction(act)}"
											rendered="#{ not act.commmentAction}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink>
										<h:commandLink style="color:white"
											data-toggle="tooltip" data-placement="left"
											title="#{msg['UserCategoryView.cancelButton']}"
											class="btn btn-sm btn-danger glyphicon glyphicon-remove"
											action="#{activityController.cancel(act)}"
											rendered="#{act.editable}" />

										<h:commandLink
											class="btn btn-sm btn-primary glyphicon glyphicon-floppy-disk"
											style="color:white;" data-toggle="tooltip"
											data-placement="right"
											title="#{msg['UserCategoryView.savechangeButton']}"
											action="#{activityController.saveAction(act)}"
											rendered="#{act.editable}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />

										</h:commandLink>
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.rePlanButton']}"
											class="btn btn-sm btn-warning glyphicon glyphicon-check"
											action="#{activityController.planAction(act)}"
											rendered="#{ not act.replanAction}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink>
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.attachFileButton']}"
											class="btn btn-sm btn-info glyphicon glyphicon-upload"
											action="#{activityController.uploadAction(act)}"
											rendered="#{ not act.doneAction}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink>
										<h:commandLink style="color:white" data-toggle="tooltip"
											data-placement="left"
											title="#{msg['UserCategoryView.reportButton']}"
											class="btn btn-sm btn-danger glyphicon glyphicon-send"
											action="#{activityController.reportAction(act)}"
											rendered="#{ not act.reportAction}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink>
									</div>
								</h:column>
								<f:facet name="footer">

									<a
										href="#{loadUserInformationsController.getContextPath()}/menu/Activity.xhtml"
										class="btn btn-primary glyphicon glyphicon-chevron-left"
										style="font-size: 14px !important;">
										#{msg['UserCatForm.BackBoardButtom']} </a>
								</f:facet>
							</h:dataTable>
						</p:outputPanel>
						<!-- END OF ACTIVITIES VIEW -->

						<!-- COMMENT AREA -->
						<p:outputPanel rendered="#{activityController.renderCommentTable}">
						
						<table
							class="table table-striped table-hover table-bordered tableUpdated "
							style="font-family: Time new roman !important; font-size: 15px !important; box-sizing: border-box; width: 82% !important; -webkit-box-shadow: none; box-shadow: none !important; margin: 17px 58px 0 !important;">

							<thead>
								<tr>
			
									<th colspan="2" bgcolor="#99b1bf"><center>
											<label style="color: white;">Activity related comment</label>
										</center></th>
								</tr>

								<tr>

									<th  bgcolor="#99b1bf">
											<label style="color: white;">ActivityDescription:</label>
										</th><th bgcolor="#99b1bf"><label style="color: white;"><h:outputText value="#{activityController.activity.description}"></h:outputText></label></th>
								</tr>
							</thead>
						<ui:repeat var="coment" value="#{activityController.commentDetail}">
							<tbody class="details">
								<tr>
									<td style="width: 30%;"><label>Comment description</label></td>
									<td><h:outputText value="#{coment.comment.description}"></h:outputText></td>
								</tr>
								<tr>
									<td style="width: 30%;" ><label>comment date:</label></td>
									<td><h:outputText value="#{coment.comment.crtdDtTime}">
										<f:convertDateTime pattern="dd/MM/yyyy" />
									</h:outputText></td>
								</tr>
								<tr>
									<td style="width: 30%;"><label>Comment given by:</label></td>
									<td><h:outputText value="#{coment.createdBy}"></h:outputText></td>
								</tr>
								
								<tr>
										<td style="width: 30%;" colspan="2"><h:commandLink value="Reply this comment"
												style="font-size: 14px !important;"
												class="btn btn-info  glyphicon glyphicon-edit"
												action="#{activityController.replyComment(coment)}">
												<f:ajax render="@form" execute="@form" onevent="showProgress" />
											</h:commandLink></td>
										
									</tr>
									
								
									
							</tbody>
							</ui:repeat>
							<p:outputPanel rendered="#{activityController.rendercomment}"
									autoUpdate="true">
									<tr><td colspan="2"></td></tr>
									<tr><td colspan="2"></td></tr>
									<tr><td colspan="2"></td></tr>
									<tr>
										<td style="width: 30%;"><label>Enter your comment:</label></td>
										<td><h:inputTextarea style="width:55%;" id="coment"
												value="#{activityController.commentDescription}" maxlength="35">
												<f:validateRegex
													pattern="#{regex['regex.validation.message.VALID.FIRST_NAME']}"></f:validateRegex>
											</h:inputTextarea><br /> <h:message errorClass="errorMsg1" for="coment"
												style="font-size:12px;font-family:Time New Roman;"></h:message>
										</td>
									</tr>
									<tr>

										<td style="width: 30%;"><h:commandLink value="Send comment"
												style="font-size: 14px !important;"
												class="btn btn-info  glyphicon glyphicon-edit"
												action="#{activityController.saveComment()}">
											</h:commandLink></td>
										<td><h:commandLink
											action="#{activityController.cancelComment()}" value="#{msg['UserCategoryView.cancelButton']}"
											style="font-size: 14px !important;"
											class="btn btn-danger glyphicon glyphicon-remove">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink></td>
									</tr>
								</p:outputPanel>
							<tr>
								<td colspan="2"><a
								href="#{loadUserInformationsController.getContextPath()}/menu/Activity.xhtml"
											style="font-size: 14px !important;"
											class="btn btn-primary glyphicon glyphicon-chevron-left"> Back
										</a></td>
								</tr>
								
						</table>
							</p:outputPanel>
						<!-- COMMENT END -->
						
						
						<!-- Uploading Activity Files -->
						<p:outputPanel>
						
						
						</p:outputPanel>
						<!-- End of Uploading -->
					</h:form>


				</div>
			</div>
		</ui:define>
	</ui:composition>
</h:body>

</html>