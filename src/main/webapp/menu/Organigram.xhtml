<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Insert title here</title>

</head>
<h:body>

	<ui:composition template="/template/common/commonLayout.xhtml">
		<ui:define name="content">
			<h:form id="form1">
				<style>
.ui-organigram .ui-organigram-node.division {
	background: #93e7ff;
	background: -moz-linear-gradient(top, #93e7ff 0%, #007efc 100%);
	background: -webkit-linear-gradient(top, #93e7ff 0%, #007efc 100%);
	background: linear-gradient(to bottom, #93e7ff 0%, #007efc 100%);
}

.ui-organigram .ui-organigram-node.employee {
	background: #88c048;
	background: -moz-linear-gradient(top, #88c048 0%, #69a038 100%);
	background: -webkit-linear-gradient(top, #88c048 0%, #69a038 100%);
	background: linear-gradient(to bottom, #88c048 0%, #69a038 100%);
}
</style>
				<p:growl id="growl" />

				<p:organigram id="organigram" widgetVar="organigram"
					value="#{organigramView.rootNode}" var="node"
					leafNodeConnectorHeight="#{organigramView.leafNodeConnectorHeight}"
					autoScrollToSelection="#{organigramView.autoScrollToSelection}"
					zoom="#{organigramView.zoom}"
					selection="#{organigramView.selection}"
					style="#{organigramView.style}">
					<p:ajax event="dragdrop" process="@this" update="@form:growl"
						listener="#{organigramView.nodeDragDropListener}" />
					<p:ajax event="select" process="@this" update="@form:growl"
						listener="#{organigramView.nodeSelectListener}" />
					<p:ajax event="contextmenu" process="@this" />
					<p:ajax event="collapse" process="@this" update="@form:growl"
						listener="#{organigramView.nodeCollapseListener}" />
					<p:ajax event="expand" process="@this" update="@form:growl"
						listener="#{organigramView.nodeExpandListener}" />

					<p:organigramNode>
						<h:outputText value="#{node.data}" />
					</p:organigramNode>

					<p:organigramNode type="root" style="border-radius: 10px;">
						<h:outputText value="#{node.data}" />
					</p:organigramNode>

					<p:organigramNode type="division" styleClass="division"
						icon="ui-icon-suitcase" iconPos="left">
						<h:outputText value="#{node.data}" />
					</p:organigramNode>

					<p:organigramNode type="employee" styleClass="employee"
						icon="ui-icon-person">
						<h:outputText value="#{node.data}" />
					</p:organigramNode>
				</p:organigram>

				<p:contextMenu for="organigram" nodeType="employee">
					<p:menuitem value="fire employee" update="organigram"
						icon="ui-icon-close"
						actionListener="#{organigramView.removeEmployee()}" />
				</p:contextMenu>

				<p:contextMenu for="organigram" nodeType="division">
					<p:menuitem value="Add employee" ajax="false" icon="ui-icon-plus"
						onclick="PF('addEmployeeDialog').show(); return false;" />
					<p:menuitem value="Remove division" update="organigram @form:growl"
						icon="ui-icon-close"
						actionListener="#{organigramView.removeDivision()}" />
				</p:contextMenu>

				<p:dialog id="addEmployeeDialog" widgetVar="addEmployeeDialog"
					header="Add employee">

					<p:inputText value="#{organigramView.employeeName}" />

					<p:commandButton process="@parent" update=":form:organigram"
						value="Add" actionListener="#{organigramView.addEmployee()}"
						oncomplete="PF('addEmployeeDialog').hide();" />

				</p:dialog>
			</h:form>

			<h:form>
				<p:panel header="Options">
					<h:panelGrid columns="2">
						<h:outputLabel value="zoom" />
						<p:selectBooleanCheckbox value="#{organigramView.zoom}">
							<p:ajax process="@this" update=":form:organigram" />
						</p:selectBooleanCheckbox>

						<h:outputLabel value="autoScrollToSelection" />
						<p:selectBooleanCheckbox
							value="#{organigramView.autoScrollToSelection}">
							<p:ajax process="@this" update=":form:organigram" />
						</p:selectBooleanCheckbox>

						<h:outputLabel value="leafNodeConnectorHeight" />
						<p:inputText value="#{organigramView.leafNodeConnectorHeight}">
							<p:ajax process="@this" update=":form:organigram" />
						</p:inputText>

						<h:outputLabel value="style" />
						<p:inputText value="#{organigramView.style}" size="100">
							<p:ajax process="@this" update=":form1:organigram" />
						</p:inputText>

						<p:commandButton value="scrollToSelection"
							onclick="PF('organigram').scrollToSelection(); return false;" />
						<p:commandButton value="Update Organigram"
							update=":form1:organigram" />
					</h:panelGrid>
				</p:panel>
			</h:form>

		</ui:define>
	</ui:composition>
</h:body>
</html>