<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" xmlns:b="http://bootsfaces.net/ui">

<h:body>

	<ui:composition template="/template/common/commonLayout.xhtml">

		<ui:define name="content">
			<h:panelGroup layout="block"
				rendered="#{activityController.valid and  not facesContext.validationFailed}">
				<ul>
					<ui:repeat value="#{facesContext.messageList}" var="facesMessage">
						<li
							style="list-style: none; background-color: #32CD32; color: white; margin-left: -4.9%"
							class="alert alert-success"><h:outputText
								value="#{facesMessage.summary}" escape="false" /></li>
					</ui:repeat>
				</ul>
			</h:panelGroup>
			<h:panelGroup layout="block"
				rendered="#{not activityController.valid and not facesContext.validationFailed}">
				<ul>
					<ui:repeat value="#{facesContext.messageList}" var="facesMessage">
						<li class="alert alert-danger"
							style="list-style: none; background-color: #FF2400; color: white">
							<center>
								<h:outputText value="#{facesMessage.summary}" escape="false" />
							</center>
						</li>
					</ui:repeat>
				</ul>
			</h:panelGroup>

			<h:form>


				<!-- 			VIEW ALL STAFF IN THE SAME BOARD			 -->

				<h:panelGroup id="tables" autoUpdate="true"
					rendered="#{activityController.rendered}">
					<h1>#{msg['planned.activity.staff']}</h1>

					<p:dataTable id="example1" class="display" cellspacing="0"
						value="#{activityController.usersDetail}" var="act">


						<p:column headerText="#{msg['massages.cmn.common.first.fname']}"
							sortBy="#{act.fname}">

							<h:outputText value="#{act.fname}" />
						</p:column>


						<p:column headerText="#{msg['massages.cmn.common.last.lname']}"
							sortBy="#{act.lname}">

							<h:outputText value="#{act.lname}" />

						</p:column>

						<p:column headerText="#{msg['form.board.board']}"
							sortBy="#{act.board}">

							<h:outputText value="#{act.board.boardName}" />

						</p:column>

						<!-- 					<p:column headerText="#{msg['form.groupmenu.creationdate']}" -->
						<!-- 						sortBy="#{act.crtdDtTime}"> -->

						<!-- 						<h:outputText value="#{act.crtdDtTime}" /> -->

						<!-- 					</p:column> -->

						<!-- 					<p:column headerText="#{msg['task.form']}" -->
						<!-- 						sortBy="#{act.task}"> -->
						<!-- 						<a href="#"> -->
						<!-- 						<h:outputText value="#{act.task}" /></a> -->

						<!-- 					</p:column> -->

						<!-- 					<p:column headerText="#{msg['form.strategicPlan.users']}" -->
						<!-- 						sortBy="#{act.createdBy}"> -->

						<!-- 						<h:outputText value="#{act.createdBy}" /> -->

						<!-- 					</p:column> -->

						<p:column headerText="Action">

							<h:commandButton style="margin-left:2px;color:white"
								class="btn btn-secondary btn-primary 	glyphicon glyphicon-info-sign"
								action="#{activityController.showTasks(act)}"
								value="#{msg['details.activity.message']}"></h:commandButton>

						</p:column>

					</p:dataTable>
				</h:panelGroup>

				<!-- 			CLOSE OF ALL STAFF IN THE SAME BOARD TABLE			 -->




				<p:outputPanel id="table6" autoUpdate="true"
					rendered="#{activityController.renderTable}">
					<div class="nav">
						<div class="div-action pull pull-left"
							style="padding-bottom: 20px;">
							<h1>#{msg['form.activity.table']}</h1>
						</div>
						<div class="div-action pull pull-right"
							style="padding-bottom: 20px;">
							<h:commandLink
								class="btn btn-primary glyphicon glyphicon-chevron-left"
								actionListener="#{activityController.back()}"
								action="#{activityController.back()}"
								value="#{msg['UserRegForm.BackButton']}">
								<f:ajax render="@form" execute="@form" onevent="showProgress" />
							</h:commandLink>
						</div>
					</div>
					<p:dataTable id="example7" class="display" cellspacing="0"
						rows="5" paginator="true"
						paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="5,10,15"
						value="#{activityController.activityDetail}" var="info">
						<p:autoUpdate /> 
						<f:facet name="header">

							<div class="form-group row">
								<label for="todate"
									class="col-md-4 col-sm-4 col-xs-5 control-label"
									style="color: black">#{msg['select.status.activity.form']}</label>
								<div class="col-md-3 col-sm-3 col-xs-4">
									<h:selectOneMenu id="categoryId6" styleClass="form-control"
										required="false" value="#{activityController.selectedStatus}"
										requiredMessage="#{msg['listofmenu.status.required']}">
										<f:selectItem
											itemLabel="#{msg['common.message.select.PLACEHOLDER']}"
											itemValue="#{null}" escapeItem="true" />
										<f:selectItems value="#{activityController.status}"
											itemLabelEscaped="true" />
										<f:ajax render="@form" event="change" execute="@this"
											listener="#{activityController.changeSelectStatus()}"
											onevent="showProgress" />
									</h:selectOneMenu>
								</div>
								<h:message for="categoryId6" styleClass="help-block"></h:message>
							</div>
						</f:facet>

						<p:column headerText="#{msg['form.activity.description']}"
							sortBy="#{info.description}">

							<h:outputText value="#{info.description}" />
						</p:column>


						<p:column headerText="#{msg['form.activity.status']}"
							sortBy="#{info.status}">

							<h:outputText value="#{info.status}" />

						</p:column>

						<p:column headerText="#{msg['form.activity.weight']}"
							sortBy="#{info.weight}">

							<h:outputText value="#{info.weight}" />

						</p:column>

						<p:column headerText="#{msg['form.groupmenu.creationdate']}"
							sortBy="#{info.crtdDtTime}">

							<h:outputText value="#{info.crtdDtTime}" />

						</p:column>

						<p:column headerText="#{msg['task.form']}"
							sortBy="#{info.task.taskName}">
							<h:outputText value="#{info.task.taskName}" />

						</p:column>

						<p:column headerText="Action">

							<div class="btn-group" role="group" aria-label="Basic example">

								<!-- 								APPROVE BUTTON 		-->

								<h:commandLink style="color:white" data-toggle="tooltip"
									data-placement="left" title="#{msg['activity.approveButton']}"
									class="btn btn-secondary btn-success  glyphicon glyphicon-ok"
									action="#{activityController.activityApproval(info)}"
									rendered="#{activityController.approveRender}">
									<f:ajax render="@form" execute="@form" onevent="showProgress" />
								</h:commandLink>

								<!-- 								END OF APPROVE BUTTON 		-->

								<!-- 								REJECT BUTTON 		-->

								<h:commandLink style="margin-left:2px;color:white"
									data-toggle="tooltip" data-placement="left"
									title="#{msg['activity.rejectButton']}"
									class="btn btn-secondary btn-danger 	glyphicon glyphicon-remove"
									action="#{activityController.activityRejection(info)}"
									rendered="#{activityController.rejectRender}">
									<f:ajax render="@form" execute="@form" onevent="showProgress" />
								</h:commandLink>

								<!-- 								END OF REJECT BUTTON 		-->

								<!-- 								COMMENT BUTTON		 -->

								<h:commandLink style="color:white" data-toggle="tooltip"
									data-placement="left"
									title="#{msg['UserCategoryView.commentButton']}"
									class="btn btn-primary glyphicon glyphicon-envelope"
									action="#{activityController.AddRejectedComment(info)}"
									rendered="#{ activityController.commentRender}">
									<f:ajax render="@form" execute="@form" onevent="showProgress" />
								</h:commandLink>

								<!-- 								END OF COMMENT BUTTON		 -->

							</div>
						</p:column>
					</p:dataTable>
				</p:outputPanel>

				<!-- COMMENT AREA -->
				<p:outputPanel rendered="#{activityController.renderCommentTable}">
					<div class=" col-md-12" style="height: 330px; overflow-y: scroll;">
						<table
							class="table table-striped table-hover table-bordered tableUpdated "
							style="font: italic 14px/18px Georgia, serif; box-sizing: border-box; width: 82% !important; -webkit-box-shadow: none; box-shadow: none !important; margin: 17px 58px 0 !important;">

							<thead>
								<tr>

									<th colspan="2" bgcolor="#99b1bf"><h:commandLink
											value="New comment" style="font-size: 14px !important;font-style:italic;font-weight:bold;"
											class="btn btn-secondary btn-success   glyphicon glyphicon-edit"
											action="#{activityController.newComment()}">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink> <label style="color: white; margin-left: 15%;font: italic bold 16px/20px Georgia, serif;">Activity
											related comment</label></th>
								</tr>

								<tr>

									<th bgcolor="#99b1bf"><label style="color: white;font: italic bold 14px/18px Georgia, serif;">ActivityDescription:</label>
									</th>
									<th bgcolor="#99b1bf"><label style="color: white;"><h:outputText
												value="#{activityController.activity.description}"></h:outputText></label></th>
								</tr>
							</thead>
							<ui:repeat var="coment"
								value="#{activityController.commentDetail}">
								<tbody class="details">
									<tr>
										<td style="width: 30%;font: italic bold 14px/18px Georgia, serif;"><label>Comment
												description</label></td>
										<td><h:outputText value="#{coment.comment.description}"></h:outputText></td>
									</tr>
									<tr>
										<td style="width: 30%;font: italic bold 14px/18px Georgia, serif;"><label>comment date:</label></td>
										<td><h:outputText value="#{coment.comment.crtdDtTime}">
												<f:convertDateTime pattern="dd/MM/yyyy" />
											</h:outputText></td>
									</tr>
									<tr>
										<td style="width: 30%;font: italic bold 14px/18px Georgia, serif;"><label>Comment given by:</label></td>
										<td><h:outputText value="#{coment.createdBy}"></h:outputText></td>
									</tr>

									<tr>
										<td style="width: 30%;font: italic bold 14px/18px Georgia, serif;" colspan="2"><h:commandLink
												value="Reply this comment"
												style="font-size: 14px !important;font-style:italic;font-weight:bold;"
												class="btn btn-info  glyphicon glyphicon-edit"
												action="#{activityController.replyComment(coment)}">
												<f:ajax render="@form" execute="@form"
													onevent="showProgress" />
										</h:commandLink></td>

									</tr>
								</tbody>
							</ui:repeat>
							<p:outputPanel rendered="#{activityController.rendercomment}"
								autoUpdate="true">
								<tr>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td colspan="2"></td>
								</tr>
								<tr>
									<td style="width: 30%;font: italic bold 14px/18px Georgia, serif;"><label>Enter your comment:</label></td>
									<td><h:inputTextarea style="width:55%;" id="coment"
											value="#{activityController.commentDescription}"
											maxlength="35">
											<f:validateRegex
												pattern="#{regex['regex.validation.message.VALID.FIRST_NAME']}"></f:validateRegex>
										</h:inputTextarea><br /> <h:message errorClass="errorMsg1" for="coment"
											style="font-size:12px;font-family:Time New Roman;"></h:message>
									</td>
								</tr>
								<tr>

									<td style="width: 30%;"><p:outputPanel
											rendered="#{activityController.renderUpload}" autoUpdate="true">
											<h:commandLink value="Send comment"
											style="font-size: 14px !important;font-style:italic;font-weight:bold;"
												class="btn btn-info  glyphicon glyphicon-edit"
												action="#{activityController.saveComment()}">
											</h:commandLink>
										</p:outputPanel> 
										
										<p:outputPanel rendered="#{activityController.planBtn}"
											autoUpdate="true">
											<h:commandLink value="Save comment"
												style="font-size: 14px !important;font-style:italic;font-weight:bold;"
												class="btn btn-info  glyphicon glyphicon-edit"
												action="#{activityController.saveSupervisorComment()}">
											</h:commandLink>
										</p:outputPanel></td>
									<td><h:commandLink
											action="#{activityController.cancelComment()}"
											value="#{msg['UserCategoryView.cancelButton']}"
											style="font-size: 14px !important;font-style:italic;font-weight:bold;"
											class="btn btn-danger glyphicon glyphicon-remove">
											<f:ajax render="@form" execute="@form" onevent="showProgress" />
										</h:commandLink></td>
								</tr>
							</p:outputPanel>
							<tr>
								<td colspan="2"><a
									href="#{loadUserInformationsController.getContextPath()}/menu/ManageActivity.xhtml"
									style="font-size: 14px !important;"
									class="btn btn-primary glyphicon glyphicon-chevron-left">
										<label style="font: italic bold 14px/18px Georgia, serif;">Back</label></a></td>
							</tr>
						</table>
					</div>
				</p:outputPanel>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>

</html>